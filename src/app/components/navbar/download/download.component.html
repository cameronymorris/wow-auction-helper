<a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
  <mat-spinner *ngIf="isDownloading()" class="float-left mr-2">
  </mat-spinner> Last update {{ timeSinceUpdate }} minutes ago
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
  <mat-card>
    <mat-card-content>
      <p>
        Here you can choose to manually re-download any of the following items.
      </p>
      <table class="table table-hover table-bordered table-striped table-sm"
        [ngClass]="{'table-dark': isDarkmode()}">
        <thead>
          <tr>
            <td> </td>
            <td>Type</td>
            <td>Last updated</td>
            <td>Download</td>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>
              <mat-spinner *ngIf="getDownloading().items" class="float-left mr-2"></mat-spinner>
            </td>
            <td>Items</td>
            <td></td>
            <td>
              <button mat-icon-button (click)="download('items')"
                [disabled]="getDownloading().items"
                matTooltip="Re-download item data">
                <i class="fas fa-download"></i>
              </button>
            </td>
          </tr>
          <tr>
            <td>
              <mat-spinner *ngIf="getDownloading().recipes" class="float-left mr-2"></mat-spinner>
            </td>
            <td>Recipes</td>
            <td></td>
            <td>
              <button mat-icon-button (click)="download('recipes')"
                [disabled]="getDownloading().recipes"
                matTooltip="Re-download recipe data">
                <i class="fas fa-download"></i>
              </button>
            </td>
          </tr>
          <tr>
            <td>
              <mat-spinner *ngIf="getDownloading().pets" class="float-left mr-2"></mat-spinner>
            </td>
            <td>Pets</td>
            <td></td>
            <td>
              <button mat-icon-button (click)="download('pets')"
                [disabled]="getDownloading().pets"
                matTooltip="Re-download pet data">
                <i class="fas fa-download"></i>
              </button>
            </td>
          </tr>
          <tr>
            <td>
              <mat-spinner *ngIf="getDownloading().auctions" class="float-left mr-2"></mat-spinner>
            </td>
            <td>Auctions</td>
            <td>{{ getAuctionsLastModified() | date: 'HH:mm M/d/yy' }}</td>
            <td>
              <button mat-icon-button (click)="download('auctions')"
                [disabled]="getDownloading().auctions"
                matTooltip="Re-download auction data">
                <i class="fas fa-download"></i>
              </button>
            </td>
          </tr>
          <tr *ngIf="isUsingTSM()">
            <td>
              <mat-spinner *ngIf="getDownloading().tsmAuctions"class="float-left mr-2"></mat-spinner>
            </td>
            <td>TSM</td>
            <td>{{ getTime('timestamp_tsm') | date: 'M/d/yy' }}</td>
            <td>
              <button mat-icon-button (click)="download('tsm')"
                [disabled]="getDownloading().tsmAuctions"
                matTooltip="Re-download TSM data">
                <i class="fas fa-download"></i>
              </button>
            </td>
          </tr>
          <tr>
            <td>
              <mat-spinner *ngIf="getDownloading().characterData" class="float-left mr-2"></mat-spinner>
            </td>
            <td>Characters</td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
    </mat-card-content>
  </mat-card>
</div>