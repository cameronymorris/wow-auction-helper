<div class="panel panel-default">
  <div class="panel-heading">
    <h2 class="panel-title">Setup</h2>
  </div>
  <div class="panel-body">
    <mat-horizontal-stepper>
      <mat-step>
        <ng-template matStepLabel>About and disclaimer</ng-template>
        <h2>WoW aucthion helper webapplication</h2>
        <p>
          This is a webapplication, that shows the user the potential profit of certain receipes in-game. It is aimed at helping the
          user earn gold in World of Warcraft.
          <br> Some of it's features include:
        </p>
        <ul>
          <li>
            The ability to make a shopping cart for materials from receipes, that is persistent between sessions (won't be lost if you
            reload)
          </li>
          <li>
            A clean overview of the current auctions (as live as available).
          </li>
          <li>
            Displaying the users current auctions, with indication for what auctions are undercutted, and wich aren't. (requires character
            name set)
          </li>
        </ul>
        <h3>Disclaimer</h3>
        <ul>
          <li>
            As I have a limited time on my hands, the following browsers are the ones I support: 
            <em>Chrome (latest version) and Firefox Quantum (latest version).</em>
          </li>
          <li>
            The application will use much data, so do not use it on the mobile network. If you are on a high populated realm, each auction
            download can be up to 25 MB. Low populated realms can be as low as 5 MB.
          </li>
          <li>
            All calculations are done on the client (your computer).
          </li>
          <li>
            No personal data sent from your computer. Anything persistent is stored on your computer. 
            The application does use Google Analytics, in order for me to see what that is most used and what to fous on.
          </li>
          <li>
            Using tools like CCleaner to clean your browser cache etc, will remove all your settings. So be aware of that.
          </li>
          <li>
            If you wish to look at the code, please feel free to do so. The GitHub link can be found
            <a routerLink="/about">here</a>.
          </li>
          <li>
            The only data you need to input is your realm and region, anything else is optional.
          </li>
        </ul>
        <div class="clearfix col-md-12 mt-2 mb-2">
          <button matStepperNext class="btn btn-primary mt-2 float-right">Next</button>
        </div>
      </mat-step>
      <mat-step>
        <ng-template matStepLabel>Realm, Region or settings import</ng-template>
        <p>
          To use the application and see crafting cost and auctions you need to define a realm. You change this at any time in the
          settings later on.
        </p>
        <form class="form-group" (ngSubmit)="registerUser()" [formGroup]="userForm">
          <mat-form-field class="col-md-2">
            <mat-select placeholder="Region" formControlName="region" requiered>
              <mat-option *ngFor="let r of getRegions()" [value]="r">
                {{ r }}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field class="col-md-3">
            <mat-select placeholder="Realm" formControlName="realm" requiered>
              <mat-option *ngFor="let r of regions?.eu.realms" [value]="r.slug">
                {{ r.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field class="col-md-4">
            <input matInput placeholder="Auctioning character (optional)" formControlName="name">
          </mat-form-field>
        </form>

        <mat-accordion>
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>
                Import existing settings
              </mat-panel-title>
              <mat-panel-description>
                Settings JSON string
              </mat-panel-description>
            </mat-expansion-panel-header>
          
            <form class="form-group" (ngSubmit)="importUserData()" [formGroup]="importSettingsForm">
              <div class="row col-md-12 mb-2">
                  <button class="btn btn-sm btn-default mat-elevation-z5 col-md-1" (click)="importUserData()">Import settings</button>
                  <mat-form-field class="col-md-11">
                    <textarea matInput type="text"
                      placeholder="Paste in the exported string here"
                      formControlName="settings">
                    </textarea>
                  </mat-form-field>
                </div>
            </form>
          </mat-expansion-panel>
        </mat-accordion>
        <div class="clearfix col-md-12 mt-2 mb-2">
          <button matStepperPrevious class="btn btn-secondary float-left mat-elevation-z5">Back</button>
          <button matStepperNext class="btn btn-primary float-right mat-elevation-z5" [disabled]="!this.isValid()">Next</button>
        </div>
      </mat-step>
      <mat-step>
        <ng-template matStepLabel>Characters and API</ng-template>
        <strong>Your API key (optional)</strong>
        <p>
          Supplying the app with an API key, allows it to display statistical data like Market value, estimated demand etc.
        </p>
        <form class="form-inline" (ngSubmit)="registerUser()" [formGroup]="userForm">
          <mat-form-field class="col-md-12">
            <input matInput placeholder="Tradeskillmaster API key" formControlName="tsmKey">
          </mat-form-field>
          If you don't have a TSM account you can 
          <a href="https://www.tradeskillmaster.com/user/register" target="_blank">create one by clicking this link</a>. Once you've done that, you can find your API key in the bottom of your
          <a href="https://www.tradeskillmaster.com/user" target="_blank">account page</a>.
        </form>

        <br>
        <app-characters [region]="userForm.value.region" [realm]="userForm.value.realm">
        </app-characters>

        <div class="clearfix col-md-12 mt-2 mb-2">
          <button matStepperPrevious class="btn btn-secondary float-left mat-elevation-z5">Back</button>
          <button matStepperNext class="btn btn-primary float-right mat-elevation-z5"
            [disabled]="!this.isValid()" type="submit" (click)="registerUser()">
            <i class="fa fa-floppy-o" aria-hidden="true"></i>
            Save and continue
          </button>
        </div>
      </mat-step>
    </mat-horizontal-stepper>

  </div>
</div>